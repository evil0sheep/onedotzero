---
- name: Ensure software-properties-common is installed
  ansible.builtin.apt:
    name: software-properties-common
    state: present
    update_cache: true

- name: Add deadsnakes PPA for newer Python versions
  ansible.builtin.apt_repository:
    repo: ppa:deadsnakes/ppa
    state: present

- name: Install python3-venv package
  ansible.builtin.apt:
    name: python3-venv
    state: present
    update_cache: true

- name: Install python3.12-venv package
  ansible.builtin.apt:
    name: python3.12-venv
    state: present
    update_cache: true

- name: Ensure the target directory for venv exists
  ansible.builtin.file:
    path: /opt/venvs
    state: directory
    mode: "0755"
    owner: compute
    group: compute
